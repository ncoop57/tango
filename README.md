<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/index.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

# Tango

> Tango is a research tool for automatically detecting duplicate video-based bug reports by combining visual and textual information present in the videos.


## Reproduce Results

**Note we will release additional data from our evaluation upon acceptance**

We have created our reproduction package using Docker. Please install [Docker](https://docs.docker.com/get-docker/) if you do not already have it install.

Steps to Reproduce:
1. Download the repository: `git clone https://github.com/two-to-tango/tango.git`
2. Download the data from our gdrive: https://drive.google.com/file/d/1jlQYaEcXR6x0-IfHtamLgF8nnustN45F/view?usp=sharing
3. Unzip the data file
2. Navigate to the root of the repo and run the start script, passing in the location of the data folder: `./start <data_path>`
3. Once the docker container has finished spinning up, jump into it: `docker exec -it tango bash`
4. Change directory into the main folder (`cd main`) and install tango locally: `pip install -e .`
5. Locate the Jupyter Notebook token by running the following command inside the docker container: `jupyter notebook list`
6. Open a browser to `localhost:8888` and paste the token into the correct field
7. Navigate to `main/nbs/06_results.ipynb` and follow the rest of the instructions provided in that notebook

## Install

Download our repo:
`git clone https://github.com/two-to-tango/tango.git`

Navigate to the root of the project and run:
`pip install .`

## How to use

`tango <query_vid_path> <corpus_path> <codebook_path> <simclr_checkpoint_path>`

Example Output:
```
OrderedDict([   (('APOD', 'CC1', 'U2'), 1.0),
                (('APOD', 'CC1', 'U1'), 0.7101319783997799),
                (('APOD', 'CC3', 'U2'), 0.19613202363022775),
                (('APOD', 'RB', 'U1'), 0.1261138231868554),
                (('APOD', 'CC2', 'U2'), 0.11940588516361622),
                (('APOD', 'CC3', 'U1'), 0.07206934454930929),
                (('APOD', 'CC2', 'U1'), 0.03426603336985401)])
```

## Training SimCLR
For training the SimCLR model we used the [RICO dataset](https://interactionmining.org/rico) and [this](https://github.com/dthiagarajan/simclr_pytorch) repository for training a SimCLR model using Pytorch Lightning
